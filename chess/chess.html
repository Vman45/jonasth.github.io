<HTML><body bgcolor="purple">
<b><font size="5" color="white">CHESS | DEEP PURPLE | </font></b><font size="5" color="white">
Your color </font><select name="piececolor" id="piececolor" onchange="chess()">
  <option value="random">random</option>
  <option value="white">white</option>
  <option value="black">black</option>
</select>
<p>
<div id='info'></div>

<canvas id="myCanvas" width="1500" height="850"></canvas>
</body></html>
<script>
var c = document.getElementById("myCanvas");
var ctm = c.getContext("2d");
let tileElement=[];

//  tileElement[] = {
//    tileColor : "",
//    tileName : "",
//    occupied : false,
//    pieceColor: "",
//    pieceType: "",
//    X:0,
//    Y:0,
//	  W:0,	
//	  H:0,	
// };

function initTiles(){
	tileElement.push({tileColor:"W",tileName:"H1",occupied:true,pieceColor:"W",pieceType:"R"});
 	tileElement.push({tileColor:"B",tileName:"G1", occupied:true,pieceColor:"W",pieceType:"N"});
	tileElement.push({tileColor:"W",tileName:"F1", occupied:true,pieceColor:"W",pieceType:"B"});
	tileElement.push({tileColor:"B",tileName:"E1", occupied:true,pieceColor:"W",pieceType:"K"});
	tileElement.push({tileColor:"W",tileName:"D1", occupied:true,pieceColor:"W",pieceType:"Q"});
	tileElement.push({tileColor:"B",tileName:"C1", occupied:true,pieceColor:"W",pieceType:"B"});
	tileElement.push({tileColor:"W",tileName:"B1", occupied:true,pieceColor:"W",pieceType:"N"});
	tileElement.push({tileColor:"B",tileName:"A1", occupied:true,pieceColor:"W",pieceType:"R"});
	
	tileElement.push({tileColor:"B",tileName:"H2", occupied:true,pieceColor:"W",pieceType:"P"});
	tileElement.push({tileColor:"W",tileName:"G2", occupied:true,pieceColor:"W",pieceType:"P"});
	tileElement.push({tileColor:"B",tileName:"F2", occupied:true,pieceColor:"W",pieceType:"P"});
	tileElement.push({tileColor:"W",tileName:"E2", occupied:true,pieceColor:"W",pieceType:"P"});
	tileElement.push({tileColor:"B",tileName:"D2", occupied:true,pieceColor:"W",pieceType:"P"});
	tileElement.push({tileColor:"W",tileName:"C2", occupied:true,pieceColor:"W",pieceType:"P"});
	tileElement.push({tileColor:"B",tileName:"B2", occupied:true,pieceColor:"W",pieceType:"P"});
	tileElement.push({tileColor:"W",tileName:"A2", occupied:true,pieceColor:"W",pieceType:"P"});
	
	tileElement.push({tileColor:"W",tileName:"H3", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"G3", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"F3", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"E3", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"D3", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"C3", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"B3", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"A3", occupied:false,pieceColor:"",pieceType:""});
	
	tileElement.push({tileColor:"B",tileName:"H4", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"G4", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"F4", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"E4", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"D4", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"C4", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"B4", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"A4", occupied:false,pieceColor:"",pieceType:""});
	
	tileElement.push({tileColor:"W",tileName:"H5", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"G5", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"F5", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"E5", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"D5", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"C5", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"B5", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"A5", occupied:false,pieceColor:"",pieceType:""});
	
	tileElement.push({tileColor:"B",tileName:"H6", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"G6", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"F6", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"E6", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"D6", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"C6", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"B",tileName:"B6", occupied:false,pieceColor:"",pieceType:""});
	tileElement.push({tileColor:"W",tileName:"A6", occupied:false,pieceColor:"",pieceType:""});
	
	tileElement.push({tileColor:"W",tileName:"H7", occupied:true,pieceColor:"B",pieceType:"P"});
	tileElement.push({tileColor:"B",tileName:"G7", occupied:true,pieceColor:"B",pieceType:"P"});
	tileElement.push({tileColor:"W",tileName:"F7", occupied:true,pieceColor:"B",pieceType:"P"});
	tileElement.push({tileColor:"B",tileName:"E7", occupied:true,pieceColor:"B",pieceType:"P"});
	tileElement.push({tileColor:"W",tileName:"D7", occupied:true,pieceColor:"B",pieceType:"P"});
	tileElement.push({tileColor:"B",tileName:"C7", occupied:true,pieceColor:"B",pieceType:"P"});
	tileElement.push({tileColor:"W",tileName:"B7", occupied:true,pieceColor:"B",pieceType:"P"});
	tileElement.push({tileColor:"B",tileName:"A7", occupied:true,pieceColor:"B",pieceType:"P"});
	
	tileElement.push({tileColor:"B",tileName:"H8", occupied:true,pieceColor:"B",pieceType:"R"});
	tileElement.push({tileColor:"W",tileName:"G8", occupied:true,pieceColor:"B",pieceType:"N"});
	tileElement.push({tileColor:"B",tileName:"F8", occupied:true,pieceColor:"B",pieceType:"B"});
	tileElement.push({tileColor:"W",tileName:"D8", occupied:true,pieceColor:"B",pieceType:"K"});
	tileElement.push({tileColor:"B",tileName:"E8", occupied:true,pieceColor:"B",pieceType:"Q"});
	tileElement.push({tileColor:"W",tileName:"C8", occupied:true,pieceColor:"B",pieceType:"B"});
	tileElement.push({tileColor:"B",tileName:"B8", occupied:true,pieceColor:"B",pieceType:"N"});
	tileElement.push({tileColor:"W",tileName:"A8", occupied:true,pieceColor:"B",pieceType:"R"});
}

function colorChoice(){
uplayer="";
var e = document.getElementById("piececolor");
sel = e.options[e.selectedIndex].text;
if (sel=="random"){random();}
else if(sel=="white") {uplayer="white";}
else if(sel=="black") {uplayer="black";}
}

function random(){
holder = Math.random() < 0.5;
if (holder==true){uplayer="white";} else if (holder==false){uplayer="black";}
}

function chess(){
    ctm.fillStyle = "#383428";
	ctm.fillRect(0, 0, 1500, 850);
	colorChoice();
	initTiles();
	board();
	start_listener();
}

function board(){
 	posX=52;
	posY=2;
	var i=0;
	var j=0;
	posX=52;
	posY=2;
	tileW=100;
	tileH=100;
	pawn="\u{265F}";
	rook="\u{265C}";
	knight="\u{265E}";
	bishop="\u{265D}";
	king="\u{265A}";
	queen="\u{265B}";
	if(uplayer=="black"){
	while (i<64) {
	pieceSetup();
	i++;
	}
	}else if (uplayer=="white"){
	i=63;
	while (i>=0) {
	pieceSetup();
	i--;
	}
}

function pieceSetup(){
squareColor=tileElement[i].tileColor;
	//alert(tileElement[i].tileName);
	if (squareColor=="W"){setColor="#fae0c8";} else if (squareColor=="B"){setColor="#6F5D5D";}
	ctm.fillStyle = setColor;
	ctm.fillRect(posX,posY,tileW,tileH);
	tileElement[i].X =posX;
	tileElement[i].Y =posY;
	tileElement[i].W =tileW;
	tileElement[i].H =tileH;
	if (tileElement[i].pieceColor=="W") {pColor="#89D1FE";;}
	else if (tileElement[i].pieceColor=="B") {pColor="#700000";}
	ctm.fillStyle = pColor;
	if (tileElement[i].pieceType=="P") {piece=pawn;}
	else if (tileElement[i].pieceType=="R") {piece=rook;}
	else if (tileElement[i].pieceType=="N") {piece=knight;}
	else if (tileElement[i].pieceType=="B") {piece=bishop;}
	else if (tileElement[i].pieceType=="K") {piece=king;}
	else if (tileElement[i].pieceType=="Q") {piece=queen;}
	else if (tileElement[i].pieceType=="") {piece="none";}
	ctm.font = "96px courier bold";
	if (piece!="none"){ctm.fillText(piece, posX+3, posY+90);}
	ctm.fillStyle = "black";
	ctm.font = "bold 18px serif";
	ctm.fillText(tileElement[i].tileName, posX, posY+90);
	posX=posX+100; 
	if(posX>=800){posX=52;posY=posY+100;};
	}
}

function stop_listeners() {
    c.removeEventListener('mouseup', start_listeners);
    c.removeEventListener('mousedown', start_listeners);
    c.removeEventListener('getPosition', start_listeners);
}

// Start listener
function start_listener() {
    mousePos = [0, 0];
    mouseDown = [0, 0];
    mouseUp = [0, 0];
    c.addEventListener("mouseup", function(evt) {
        mouseUp = getPosition(ctm, evt);
        message = 'Mouse up: ' + mouseUp.x + ',' + mouseUp.y;
		mouseOp();
        mouseup_logic();
    }, false);
    c.addEventListener("mousedown", function(evt) {
        mouseDown = getPosition(ctm, evt);
        message = 'Mouse down: ' + mouseDown.x + ',' + mouseDown.y;
		mouseOp();
        mousedown_logic();
    }, false);
    c.addEventListener('mousemove', function(evt) {
       mousePos = getPosition(ctm, evt);
       message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
	   mouseOp();
	   arrayScan();
    }, false);
}

function arrayScan(){
  
	for (var t=0;t<64;t++){
		if (mousePos.x >= tileElement[t].X && mousePos.x <= (tileElement[t].X + tileElement[t].W) && mousePos.y >= tileElement[t].Y && mousePos.y <= (tileElement[t].Y + tileElement[t].H)) {
			ctm.lineWidth = 6;
			ctm.strokeStyle = "orange";
			ctm.strokeRect(tileElement[t].X+4,tileElement[t].Y,tileElement[t].W-4,tileElement[t].H-3);
			//saveX=tileElement[t].X;
			//saveY=tileElement[t].X;
			//saveW=tileElement[t].W;
			//saveH=tileElement[t].H;
		} else {
			squareColor=tileElement[t].tileColor;
			if (squareColor=="W"){setColor="#fae0c8";} else if (squareColor=="B"){setColor="#6F5D5D";}
			ctm.lineWidth =6;
			ctm.strokeStyle = setColor;
			ctm.strokeRect(tileElement[t].X+4,tileElement[t].Y,tileElement[t].W-4,tileElement[t].H-3);
		}
	}	
}




function mouseOp(){
	ctm.fillStyle = "orange";
	ctm.fillRect(850,3,220,25);
	ctm.fillStyle = "black";
	ctm.fillText(message, 860, 20);
}



// Get X, Y cordinates mouse position
function getPosition(ctm, evt) {
    var rect = c.getBoundingClientRect();
    return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
    };
	
}

// How program behave on mouse click, drag, drop
function mousedown_logic() {
    if (document.getElementById('movenode').checked) {
        message2 = "MOVE"
        node_fetch();
    } else if (document.getElementById('cnode').checked) {
        message2 = "CREATE MODE"
        createNode();
    } else if (document.getElementById('rnode').checked) {
        message2 = "REMOVE NODE"
        removeNode();
    } else if (document.getElementById('mnode').checked) {
        message2 = "MARK NODE"
        markNode();
    } 
}

function mouseup_logic() {
    if (document.getElementById('movenode').checked) {
        move_release();
        message2 = "NODE RELEASE";
    } else if (document.getElementById('cnode').checked) {
        message2 = "NODES " + arr.length;
    } else if (document.getElementById('area').checked) {
        message2 = "AREA SELECT NODES"
        areaSelectUp();
    }  else if (document.getElementById('movemarked').checked) {
        message2 = "RELEASE MOVED"
        move_release();
    }  else if (document.getElementById('reshaper').checked) {
        message2 = "RESHAPE RELEASED";
        reshape_release();
    }
}

function pieceMarked(){

}

function moves(){
let Wdiagonal=[];
let Bdiagonal=[];
let horisontal=[];
let vertical=[];
}

chess();
</script>